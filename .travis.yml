language: python
python:
  - 2.7
addons:
  postgresql: "9.3"  
install:
  - pip install -r requirements/dev.txt
before_script:
  - cp ap/ap/settings/local.py.example ap/ap/settings/local.py
  - psql -c 'create database djattendance;' -U postgres
  - sed -i -e 's/getpass.getuser()/"postgres"/g' ap/ap/settings/local.py
  - cd ap
  - python manage.py syncdb --settings=ap.settings.local --noinput
script:
  - python manage.py test --settings=ap.settings.local
  - coverage run manage.py test --settings=ap.settings.local
  - coverage report --rcfile="/home/travis/build/attendanceproject/djattendance/ap/.coveragerc"
# - coverage report --omit="*/python?.?/*"

# email notification settings
notifications:
  email:
    recipients:
      - lifeunion@gmail.com
#on_success: [change]
#on_failure: [always]
after_success:
  - coveralls
