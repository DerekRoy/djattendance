{% extends "lifestudies/base_lifestudies.html" %}

{% load staticfiles %}

{% block references %}
    <link rel="stylesheet" href="{% static "lifestudies/css/collapsePanel.css" %}" />
    <link rel="stylesheet" href="{% static "lifestudies/css/checkboxes.css" %}" />
{% endblock %}

{% block tab1 %} class="active" {% endblock %}

{% block title %}Life Study{% endblock %}

{% block lifestudies_content %}

    {% if profile.trainee %}

    <h2> Life Study Summaries</h2>

    <div class="panel-group" id="accordion">

        {% for discipline in disciplines %}
        {% if discipline.trainee.account_id == profile.pk and discipline.isCompleted == False %}

        <div class="panel panel-primary">
            <div class="panel-heading">
                <h3 class="panel-title">
                    Discipline assigned for {{discipline.infraction}}. Summaries left: <b>{{discipline.getNumSummaryDue}}</b>
                </h3>
                <span class="pull-right clickable"><i class="glyphicon glyphicon-chevron-up"></i></span>
            </div>
            <div class="panel-body">
                <ul class="list-group">
                    {% for summary in discipline.summary_set.all %}
                        {% if summary.approved == False %}
                        <a href="{% url 'summary-detail' summary.pk %}" class="list-group-item">
                        {% else %}
                        <a class="list-group-item disabled">
                        {% endif %}
                            <div class="col-md-12">
                                <h2>{{summary.book.name}}</h2>
                                <p>{{summary.content}}</p>
                                <div>
                                    <span class="badge alert-info">{{summary.date_submitted}}</span>
                                    {% if summary.approved %}
                                    <span class="badge alert-success">approved</span>
                                    {% else %}
                                    <span class="badge alert-danger">not approved</span>
                                    {% endif %}
                                    <div class="pull-right">
                                        {% if summary.approved == False %}
                                            <form action="{% url 'summary-detail' summary.pk %}" method="get">
                                                {% csrf_token %}
                                                <button type="submit" class="btn btn-success btn-xs">Edit</button>
                                            </form>
                                        {% endif %}        
                                    </div>
                                </div>
                            </div>
                        </a>
                    {% endfor %}
                    {% if discipline.getNumSummaryDue > 0 %}
                        <form action="{% url 'summary-create' discipline.pk %}">
                            <div class="pull-right">
                                <button class="btn btn-success btn-xs">New Life-Study Summary </button>
                            </div>
                        </form>
                    {% endif %}
                </ul>
            </div>
        </div>

        {% endif %}
        {% endfor %}

    </div>

    {% elif profile.trainingassistant %}

        <h2> Life Study TA View </h2>

        <form role="form" action="{% url 'discipline-list' %}" method="post">
            {% csrf_token %}

            <table class="table table-hover table-condensed" id="mytable">

                <thead>
                    <tr>
                        <th><input type="checkbox" id="checkall" /></th>
                        <th> Edit </th>
                        <th> Name </th>
                        <th> Reason </th>
                        <th> Type </th>
                        <th> Quantity </th>
                        <th> Still Due </th>
                        <th> Date Assigned </th>
                        <th> Due Date </th>  
                        <th> Unapproved </th>
                    </tr>
                </thead>

                <tbody>
                    {% for discipline in disciplines %}
                    {% if discipline.isCompleted == False %}
                    <tr>
                        <td><input type="checkbox" name="selection" value="{{discipline.pk}}"></input></td>
                        <td>
                            <a href="{% url 'discipline-detail' discipline.pk %}" class="btn btn-primary btn-xs" role="button">
                                <span class="glyphicon glyphicon-pencil"></span>
                            </a>
                        </td>
                        <td>{{discipline.trainee.account.firstname}} {{discipline.trainee.account.lastname|slice:"1"}}.</td>
                        <td>{{discipline.infraction}}</td>
                        <td>{{discipline.offense}}</td>
                        <td>{{discipline.quantity}}</td>
                        <td><b>{{discipline.getNumSummaryDue}}</b></td>
                        <td>{{discipline.date_assigned | date:"m/d/y"}}
                        <td>{{discipline.due | date:"m/d/y"}}</td>

                        <td>
                            {% for summary in discipline.summary_set.all %}
                            <a href="{% url 'summary-approve' summary.pk %}" class="tooltip-submit-date" data-toggle="tooltip" data-placement="top" title="{{summary.date_submitted | date:"m/d/y"}}">
                                <span class="glyphicon glyphicon-file"></span>
                            </a>
                            {% endfor %}
                        </td>
                    </tr>
                    {% endif %}
                    {% endfor %}
                </tbody>

            </table>
            <div class="pull-right">
                <button type="submit" name="approve" class="btn btn-success">Approve Selected</button>
                <button type="submit" name="delete" class="btn btn-danger">Delete Selected</button>
            </div>
        </form>




    {% endif %}

{%comment%}
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="http://templateplanet.info/tooltip.js"></script>
<script src="http://templateplanet.info/modal.js"></script>
<div class="container">
    <div class="row">
        
        
        <div class="col-md-12">
        <h4>Bootstrap Snipp for Datatable</h4>
        <div class="table-responsive">
        
                
    <table id="mytable" class="table table-bordred table-striped">
                   
    <thead>             
        <th></th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Address</th>
        <th>Edit</th>
        <th>Delete</th>
    </thead>

    <tbody>
    
    <tr>
    <td><input type="checkbox" class="checkthis" /></td>
    <td>Mohsin</td>
    <td>Irshad</td>
    <td>CB 106/107 Street # 11 Wah Cantt Islamabad Pakistan</td>
    <td><p><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal" data-target="#edit" data-placement="top" rel="tooltip"><span class="glyphicon glyphicon-pencil"></span></button></p></td>
    <td><p><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal" data-target="#delete" data-placement="top" rel="tooltip"><span class="glyphicon glyphicon-trash"></span></button></p></td>
    </tr>
    
        <tr>
    <td><input type="checkbox" class="checkthis" /></td>
    <td>Mohsin</td>
    <td>Irshad</td>
    <td>CB 106/107 Street # 11 Wah Cantt Islamabad Pakistan</td>
    <td><p><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal" data-target="#edit" data-placement="top" rel="tooltip"><span class="glyphicon glyphicon-pencil"></span></button></p></td>
    <td><p><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal" data-target="#delete" data-placement="top" rel="tooltip"><span class="glyphicon glyphicon-trash"></span></button></p></td>
    </tr>
    
    
        <tr>
    <td><input type="checkbox" class="checkthis" /></td>
    <td>Mohsin</td>
    <td>Irshad</td>
    <td>CB 106/107 Street # 11 Wah Cantt Islamabad Pakistan</td>
    <td><p><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal" data-target="#edit" data-placement="top" rel="tooltip"><span class="glyphicon glyphicon-pencil"></span></button></p></td>
    <td><p><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal" data-target="#delete" data-placement="top" rel="tooltip"><span class="glyphicon glyphicon-trash"></span></button></p></td>
    </tr>
    
    
    
        <tr>
    <td><input type="checkbox" class="checkthis" /></td>
    <td>Mohsin</td>
    <td>Irshad</td>
    <td>CB 106/107 Street # 11 Wah Cantt Islamabad Pakistan</td>
    <td><p><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal" data-target="#edit" data-placement="top" rel="tooltip"><span class="glyphicon glyphicon-pencil"></span></button></p></td>
    <td><p><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal" data-target="#delete" data-placement="top" rel="tooltip"><span class="glyphicon glyphicon-trash"></span></button></p></td>
    </tr>
    
    
    
        <tr>
    <td><input type="checkbox" class="checkthis" /></td>
    <td>Mohsin</td>
    <td>Irshad</td>
    <td>CB 106/107 Street # 11 Wah Cantt Islamabad Pakistan</td>
    <td><p><button class="btn btn-primary btn-xs" data-title="Edit" data-toggle="modal" data-target="#edit" data-placement="top" rel="tooltip"><span class="glyphicon glyphicon-pencil"></span></button></p></td>
    <td><p><button class="btn btn-danger btn-xs" data-title="Delete" data-toggle="modal" data-target="#delete" data-placement="top" rel="tooltip"><span class="glyphicon glyphicon-trash"></span></button></p></td>
    </tr>
    
    
   
    
   
    
    </tbody>
        
</table>

<div class="clearfix"></div>
<ul class="pagination pull-right">
  <li class="disabled"><a href="#"><span class="glyphicon glyphicon-chevron-left"></span></a></li>
  <li class="active"><a href="#">1</a></li>
  <li><a href="#">2</a></li>
  <li><a href="#">3</a></li>
  <li><a href="#">4</a></li>
  <li><a href="#">5</a></li>
  <li><a href="#"><span class="glyphicon glyphicon-chevron-right"></span></a></li>
</ul>
                
            </div>
            
        </div>
    </div>
</div>


<div class="modal fade" id="edit" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
      <div class="modal-dialog">
    <div class="modal-content">
          <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h4 class="modal-title custom_align" id="Heading">Edit Your Detail</h4>
      </div>
          <div class="modal-body">
          <div class="form-group">
        <input class="form-control " type="text" placeholder="Mohsin">
        </div>
        <div class="form-group">
        
        <input class="form-control " type="text" placeholder="Irshad">
        </div>
        <div class="form-group">
        <textarea rows="2" class="form-control" placeholder="CB 106/107 Street # 11 Wah Cantt Islamabad Pakistan"></textarea>
    
        
        </div>
      </div>
          <div class="modal-footer ">
        <button type="button" class="btn btn-warning btn-lg" style="width: 100%;"><span class="glyphicon glyphicon-ok-sign"></span> Update</button>
      </div>
        </div>
    <!-- /.modal-content --> 
  </div>
      <!-- /.modal-dialog --> 
    </div>
    
    
    
    <div class="modal fade" id="delete" tabindex="-1" role="dialog" aria-labelledby="edit" aria-hidden="true">
      <div class="modal-dialog">
    <div class="modal-content">
          <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h4 class="modal-title custom_align" id="Heading">Delete this entry</h4>
      </div>
          <div class="modal-body">
       
       <div class="alert alert-warning"><span class="glyphicon glyphicon-warning-sign"></span> Are you sure you want to delete this Record?</div>
       
      </div>
        <div class="modal-footer ">
        <button type="button" class="btn btn-warning" ><span class="glyphicon glyphicon-ok-sign"></span> Yes</button>
        <button type="button" class="btn btn-warning" ><span class="glyphicon glyphicon-remove"></span> No</button>
      </div>
        </div>
    <!-- /.modal-content --> 
  </div>
      <!-- /.modal-dialog --> 
    </div>

{%endcomment%}

{% endblock %}

{% block scripts %}
    <script type="text/javascript" src="{% static "lifestudies/js/collapsePanel.js" %}"></script>
    <script type="text/javascript" src="{% static "lifestudies/js/clickAll.js" %}"></script>
    <script type="text/javascript" src="{% static "lifestudies/js/checkboxes.js" %}"></script>
    <script type="text/javascript" src="{% static "lifestudies/js/tooltip-submit-date.js" %}"></script>    
{% endblock %}

