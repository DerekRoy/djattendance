{% extends "base.html" %}

{% load staticfiles %}
{% load bootstrap3 %}
{% load smart_cards %}
{% load common_tags %}

{% block title %}Home{% endblock %}

<!-- CSS -->
{% block references %}
  <!-- Disable scaling to remove click delay on mobile for this page -->
  <meta name="viewport" content="width=device-width, user-scalable=no">
  <style type="text/css">
    .cardss {
      display: grid;
      grid-template-columns: 1fr 1fr 1fr 1fr;
      grid-template-rows: 1fr 1fr;
      grid-column-gap: 20px;
      grid-row-gap: 20px;
      grid-auto-flow: row;
    }

    .card {
      display: grid;
      /*figure out if there is a better way?*/
      grid-template-rows: 30px 1fr;
    }

    .card-header {
      color: #9dd0d8 ;
      font-size: 18px;
      text-transform: uppercase;
      font-weight: bold;
      border-bottom: 0.5px solid #9dd0d8;
    }

    .card-content {
      margin-top: 10px;
    }

    .card-list {
      color: #095f80;
      font-size: 15px;
      font-weight: bold;
    }

    .card-item {
      display: grid;
      /*again - better way?*/
      grid-template-columns: 1fr 30px;
    }

    .number-alert {
      text-align: right;
      color: red;
    }

    .number-nought {
      text-align: right;
      color: #9dd0d8;
    }
  </style>
{% endblock %}

{% block content %}
  <h2>Welcome, {{ user.firstname }}! </h2>

  <!-- Daily Nourishment -->
  <div class="panel panel-info">
    <div class="panel-heading">
    <h5 class="panel-title">Daily Nourishment</h5>
    </div>
    <div class="panel-body">
  {% if daily_nourishment.text %}
    <blockquote>
      {{ daily_nourishment.text }}
      <small>{{ daily_nourishment.ref }}</small>
    </blockquote>
  {% else %}
    No nourishment has been submitted.
  {% endif %}
    </div>
    <div class="panel-footer">
      <i>Click <a href="/dailybread/submit">here</a> to submit a verse or ministry portion that you have enjoyed.</i>
    </div>
  </div>

  {% if schedule %}
  <div class="panel panel-primary">
    <div class="panel-heading">
    <h5 class="panel-title">Today's Schedule</h5>
    </div>
    <div class="panel-body">
    <ul>
    {% for event in schedule.todays_events %}
      <li>{{ event.name }} @ {{ event.start }}</li>
    {% endfor %}
    </li>
    </div>
  </div>
  {% endif %}

  <!-- Cards -->
  <div class="cardss">
    {% generate_cards as cards %}
    {% for card in cards %}
      {% if card.condition %}

      <div class="card">
        <span class="card-header"> {{ card.header_title }} </span>
        <span class=card-content>
          {% for card_link in card.card_links %}
            <span class="card-item">
              <a href="{{ card_link.url }}" class="card-list">{{ card_link.title }}</a>
              {% if card_link.number is not None %}
                {% if card_link.number == 0 %}
                  <div class="number-nought">0</div>
                {% else %}
                  <div class="number-alert">{{ card_link.number }}</div>
                {% endif %}
              {% endif %}
            </span>
          {% endfor %}
        </span>
      </div>
    {% endif %}
    {% endfor %}
  </div>

  
{% endblock %}

{% block post_container %}
  {% include 'popups/announcement_popup.html' %}
{% endblock %}
