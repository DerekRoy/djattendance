{% extends "base.html" %}

{% load staticfiles %}
{% load bootstrap3 %}
{% load panels %}
{% load smart_cards %}
{% load common_tags %}

{% block title %}Home{% endblock %}

{% block scripts %}
<script>
  $(".dropdown-menu li a").click(function(){
    $(this).parents(".dropdown").find('.btn').html($(this).text() + ' <span class="caret"></span>');
    $(this).parents(".dropdown").find('.btn').val($(this).data('value'));
  });

</script>
{% endblock %}

{% block references %}

<!-- Disable scaling to remove click delay on mobile for this page -->
<meta name="viewport" content="width=device-width, user-scalable=no">
<style type="text/css">
td{
  text-align: center;
}

.bible-indicator{
  font-weight: bold;
}

.trainee-search-container {
  overflow: auto;
}

.trainee-search-container:hover {
  background-color: #FFF;
  color: #095F80;
  border-color: #A6C5D1;
  -webkit-box-shadow: 3px 2px #A6C5D1;
  -moz-box-shadow: 3px 2px #A6C5D1;
  box-shadow: 3px 2px #A6C5D1;
}

.trainee-search-input {
  border: none;
  float: left;
}

.trainee-search-input:focus {
  outline: none;
}

.trainee-search-box {
  background: #A6C5D1;
  padding: 0.25px 26px 0.2px 12px;
  margin-top: 3px;
  margin-left: 8px;
  margin-right: 0px;
  height: 1em;
  float: right;
}

</style>
{% endblock %}

{% block content %}
<div class="container">
  <div class="row">
    <h1 class="col-md-4"> Welcome, {{ user.firstname }}! </h1>
  </div>

  {% if user.type == 'T' %}
  <!-- Trainee Search Box for TAs -->
  <div class="row">
    <div class="col-md-4">
      <div class="btn-group-vertical">
        <div class="btn btn-panel trainee-search-container">
          <input class="btn-txt trainee-search-input" type="text" placeholder="TRAINEE SEARCH"></input>
          <span class="trainee-search-box"></span>
        </div>
      </div>
    </div>
  </div>

  {% elif user.type == 'R' %}

  <div class="row">
    <!-- Panels -->
    <div class="col-md-4">
      <div id="panelsDiv" class="btn-group-vertical">
        {% generate_panels as panels %}
        {% for panel in panels %}
        <a class="btn btn-panel" href="{{ panel.url }}" >
          {# moved number first to fix firefox rendering issue #}
          {% if panel.num is not None %}
              {% if panel.num == 0 %}
                <span class="btn-num-nought"> {{ panel.num }}</span>
              {% else %}
                <span class="btn-num"> {{ panel.num }}</span>
            {% endif %}
          {% endif %}
          <span class="btn-txt"> {{ panel.name }} </span>
        </a>
        {% endfor %}
      </div>
    </div>
  </div>

  {% endif %}

  <!-- Cards -->
    {% spaceless %}
    <div class="row">
      <div class="row-md-12">
        <div class="card_container">
          {% generate_cards as cards %}
          {% for card in cards %}
            {% if card.condition %}
            <div class="card">
              <span class="card-header h3"> {{ card.header_title }} </span>
              <span class=card-content>
                {% for card_link in card.card_links %}
                  <span class="card-item">
                    <a href="{{ card_link.url }}" class="card-list">{{ card_link.title }}</a>
                    {% if card_link.number is not None %}
                      {% if card_link.number == 0 %}
                        <div class="number-nought">0</div>
                      {% else %}
                        <div class="number-alert">{{ card_link.number }}</div>
                      {% endif %}
                    {% endif %}
                  </span>
                {% endfor %}
              </span>
            </div>
          {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
    {% endspaceless %}

  </div>

  {% if schedule %}
  <div class="panel panel-primary">
    <div class="panel-heading">
      <h5 class="panel-title">Today's Schedule</h5>
    </div>
    <div class="panel-body">
      <ul>
        {% for event in schedule.todays_events %}
        <li>{{ event.name }} @ {{ event.start }}</li>
        {% endfor %}
      </li>
    </div>
  </div>
  {% endif %}

{% endblock %}

{% block post_container %}
{% include 'popups/announcement_popup.html' %}
{% endblock %}
