{% load staticfiles %}
{% load bootstrap3 %}
{% load smart_menu %}
{% load common_tags %}
{% load render_bundle from webpack_loader %}

<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" href="{% static 'favicon.ico' %}">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="">
    <title>FTTA | {% block title %}{% endblock %}</title>
    {% block media %}
      {# PLEASE SEE static/README.md for instructions on how to add libraries and modify front-end files #}
      {# Change to use bootflat.min.css when launching to production #}
      {% render_bundle 'main' 'css' %}
      {% render_bundle 'main' 'js' %}
      {% block references %}
        <!-- additional css/refs here -->
      {% endblock references %}
      {% block scripts %}
        <!-- additional js here -->
	<script>
	  window.onload = function() {
	  var div = document.getElementById("panelsDiv");
	  var panels = new Array();
	  panels = [
	  {urlName:"lifestudies", name:"Life Studies", value:"1" },
	  {urlName:"attendance", name:"Class Notes", value:"3"},
	  {urlName:"attendance", name:"Unexcused Tardies", value:"2"},
	  {urlName:"attendance", name:"Unexcused Absences", value:"0"},
	  {urlName:"attendance", name:"Leave Slips Pending", value:"2"}
	  ];
	  
	  var html = "";
	  for (var i=0; i < panels.length; i++) {
			    html += "<a class='btn btn-panel' href='" + window.location.href + panels[i].urlName + "'> <span class='btn-txt'>" + panels[i].name + "</span>"
			    + "<span class='btn-num'>" + panels[i].value + "</span>"
	  }
					  
	  div.innerHTML = html;
	};		   
	</script>
	{% endblock scripts %}
	{% endblock %}
  </head>
  <body>

  <hr id="ajaxStatus" />
  <nav class="navbar navbar-default navbar-static-top">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle glyphicon glyphicon-chevron-down visible-xs" data-toggle="collapse" data-target="#navbar-collapse-1">
        </button>
        <a class="navbar-brand" href="{% url 'home' %}">FTTA</a>
      </div>
      <div class="collapse navbar-collapse" id="navbar-collapse-1">
          <ul class="nav navbar-nav">
          {% block nav %}
            {% generate_menu as menu %}
            {{ menu |safe }}
          {% endblock%}
          </ul>
      <ul class="nav navbar-nav navbar-right">
        </form>
        {% block navbar-right %}
          <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
              Hi, {{user.full_name}}! <span class="caret"></span>
            </a>
            <ul class="dropdown-menu" role="menu">
              <li role="presentation" class="dropdown-header">Account Settings</li>
              <li role="presentation"><a role="menuitem" tabindex="-1" href="{% url 'user_detail' user.id %}">Profile</a></li>
              <li role="presentation"><a role="menuitem" tabindex="-1" href="{% url 'email_change' user.id %}">Change Email</a></li>
              <li role="presentation"><a role="menuitem" tabindex="-1" href="{% url 'password_change' %}">Change Password</a></li>
              <li role="presentation"><a role="menuitem" tabindex="-1" href="{% url 'user_update' user.id %}">Update Account</a></li>
              <li role="presentation"><a role="menuitem" tabindex="-1" href="{% url 'switch_user' %}">Switch Identity</a></li>
              <li role="presentation" class="divider"></li>
              <li role="presentation"><a role="menuitem" tabindex="-1" href="{% url 'logout' %}">Logout</a></li>
            </ul>
          </li>
        {% endblock %}
        </ul>
      </div>
    </div>
  </nav>

  {# use spaceless to make use of :empty css selector #}
  {% spaceless %}
  <nav id="subnav" class="navbar navbar-static-top navbar--subnav">
      {% if messages %}
        {% include "_announce.html" %}
      {% endif %}
      {% block subnav %}
      {% endblock %}
  </nav>
  {% endspaceless %}

    <div class="container-fluid">
      <div class="row row-offcanvas row-offcanvas-left">
        <!--CONTENT-->
        <div id="content" class="col-xs-12 content">
          {% block content %}
            <!-- CONTENT OF PAGE GOES HERE -->
          {% endblock %}
        </div> <!--/CONTENT -->
      </div> <!-- /row -->
    </div> <!-- /container -->
    {% block post_container %}
      <!-- CONTENT OF POPUPs, STATUS UPDATES go here -->
    {% endblock %}
    {% include "popups/in_class_popup.html" %}
  </body>
</html>
