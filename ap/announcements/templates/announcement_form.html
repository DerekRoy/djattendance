{% extends "requests/request_form.html" %}
{% load staticfiles %}
{% load bootstrap3 %}
{% bootstrap_messages %}

{% block scripts %}
  {{ block.super }}
  {{ form.media }}
  <script>
  $(document).ready(function() {
    $('#id_trainees').djangoSelect2({width: '100%'});

    var typeWidget = $('#id_type');
    var hidden_fields = $('.hide-if-in-class').parent();
    if (typeWidget.val() == 'CLASS') {
      hidden_fields.hide();
    }
    typeWidget.change(function() {
      hidden_fields.fadeToggle();
    });

    var isPopupWidget = $('#id_is_popup');
    var hidden_if_popup = $('.hide-if-popup').parent();
    if (isPopupWidget.is(':checked')) {
      hidden_if_popup.hide();
    }
    isPopupWidget.change(function() {
      hidden_if_popup.fadeToggle();
    });
  });
  </script>
{% endblock %}

{% block buttons %}
<button type="button" class="btn btn-default" data-toggle="modal" data-target="#trainee_select">
  <span class="hide-if-in-class">Add Trainee Group</span>
</button>
<button type="submit" class="btn btn-primary">
  Submit
</button>
{% endblock %}

{% block extra_form_elements %}
  {% include 'popups/trainee_select_modal.html' %}
{% endblock %}
